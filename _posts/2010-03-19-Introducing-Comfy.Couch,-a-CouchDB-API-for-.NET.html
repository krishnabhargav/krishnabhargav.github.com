---           
layout: post
title: Introducing Comfy.Couch, a CouchDB API for .NET
date: 2010-03-19 02:27:11 UTC
updated: 2010-03-19 02:27:11 UTC
comments: false
categories: 
---

<p>WARNING : The work is still in progress.</p>  <p>From the past few days, I have been working on coming up with a nice little .NET Library that one could use with CouchDB. My goal was to stick with the CouchDB API documentation as much as I can so that it would be easier to work with the driver. The library has dependencies on Log4Net and Json.NET libraries.</p>  <p>I tried to be over-smart when picking that name â€“ Comfy.Couch (I meant a comfortable couch to use :)). At the moment, the database API is functionally complete, but you cannot really use it unless you have the Document API which would be coming soon. The reference is at <a href="http://wiki.apache.org/couchdb/HTTP_database_API">http://wiki.apache.org/couchdb/HTTP_database_API</a></p>  <p>I made sure I wrote unit tests to cover most part of my code, but I did miss some pieces here and there.</p>  <p><a href="http://lh5.ggpht.com/_Oy9HuksgrdU/S6Lg_K66wJI/AAAAAAAABK8/Six65bmoCK4/s1600-h/image%5B3%5D.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://lh4.ggpht.com/_Oy9HuksgrdU/S6Lg_zEW4zI/AAAAAAAABLA/3mxI52gD8Tw/image_thumb%5B1%5D.png?imgmax=800" width="644" height="369" /></a> </p>  <p>So I ended up having 94% of code coverage so far and I will be adding tests soon.</p>  <p>My idea is to first get the complete API in place and then worry about where it has to be tuned. So far, I have not focused on any kind of tuning, which I think could be done. I have thrown in a few asynchronous requests here and there but they are yet to be tested.</p>  <p>1. Creating a database.</p> <pre name="code" class="c#"><br />CouchDatabaseOperations.Create("databasename"); //validation on database names is pending. <br /></pre><br /><br /><p>2. Getting database information from the server</p><br /><pre name="code" class="c#"><br />ICouchDatabase db = CouchDatabaseOperations.Get("databasename");<br />CouchDatabaseInfo info = db.Metadata; <br /></pre><br /><br /><p>3. Deleting the database</p><br /><pre name="code" class="c#"><br />//Delete operation uses MaxRetries as 2 since most of the times the first delete request fails on Windows.<br />CouchDatabaseOperations.Delete("databasename"); <br /></pre><br /><br /><p>While I have successfully completed the rest of the API that is described in the Database API reference at CouchDB website, I just showed how the library could be used in here. The unit tests might be more helpful for you to get started, if you are interested.</p><br /><br /><p>Next steps: </p><br /><ul><br /><li> Upload the sourcecode to comfy.codeplex.com<br /><li> Improvize logging information<br /><li> Work on the Document API<br /><li> Work on the View API<br /><li> Work on the Bulk Document API<br /><li> Run some performance tests and identify the bottlenecks in the driver.<br /><li> Sample Scrum Management tool in Silverlight 4 that uses CouchDB for data backend.<br /></ul>  