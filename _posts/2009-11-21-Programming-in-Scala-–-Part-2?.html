---           
layout: post
title: Programming in Scala – Part 2/?
date: 2009-11-21 19:07:44 UTC
updated: 2009-11-21 19:07:44 UTC
comments: false
categories: 
---

<p>In my <a href="http://krishnabhargav.blogspot.com/2009/11/scala-for-dummies-like-me.html" target="_blank">previous post</a>, we got started with simple Scala HelloWorld and moved on to write a bubble sort in Scala. This time let us look at some differences between a “var” and a “val” in scala. I hope you all know what “immutable” means – simply put Strings in Java/.NET are immutable. Anytime you modify a string, a new object of string is created – they cannot be changed in place. Well, in scala when you declare a variable with a “val” it would be immutable. Look at the following scala code.</p>  <pre class="scala" name="code">object ValVar<br />{<br />	def main(args: Array[String])<br />	{<br />		val immutableValue = 200<br />		//immutableValue = 20 -&gt; gives compiler error<br />		var mutableValue = 200<br />		mutableValue = 20<br />		println(&quot;Immutable : &quot;+immutableValue+&quot;\n Mutable  : &quot;+mutableValue)<br />	}<br />}</pre><br /><br /><p>The decompiled program would look like shown in Java</p><br /><br /><pre class="java" name="code">import java.rmi.RemoteException;<br />import scala.Predef.;<br />import scala.ScalaObject;<br />import scala.ScalaObject.class;<br />import scala.StringBuilder;<br />import scala.runtime.BoxesRunTime;<br /><br />public final class ValVar$<br />  implements ScalaObject<br />{<br />  public static final  MODULE$;<br /><br />  static<br />  {<br />    new ();<br />  }<br /><br />  public ValVar$()<br />  {<br />    MODULE$ = this;<br />  }<br /><br />  public void main(String[] args) {<br />    int immutableValue = 200;<br /><br />    int mutableValue = 200;<br />    mutableValue = 20;<br />    Predef..MODULE$.println(new StringBuilder().append(&quot;Immutable : &quot;).<br />			append(BoxesRunTime.boxToInteger(immutableValue)).<br />			append(&quot;\n Mutable  : &quot;).<br />			append(BoxesRunTime.boxToInteger(mutableValue)).toString());<br />  }<br /><br />  public int $tag()<br />    throws RemoteException<br />  {<br />    return ScalaObject.class.$tag(this);<br />  }<br />}</pre><br /><br /><p>Clearly, it does not look like &quot;immutable&quot; variables are declared final in the Java code. So it appears to me that Scala compiler does the job of making sure that the val'bles are immutable. For those curios to see what happens if you attempt to change a val'ble, see the screenshot below. Also it would be interesting to note that the scala compiler takes care of optimizing our string concatenation to make use of String builder, just like the javac!</p><br /><br /><p><a href="http://lh6.ggpht.com/_Oy9HuksgrdU/Swg6JOQF4QI/AAAAAAAABHw/c8uTmVZJDZE/s1600-h/image%5B3%5D.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="image" border="0" alt="image" src="http://lh6.ggpht.com/_Oy9HuksgrdU/Swg6JYM8W6I/AAAAAAAABH0/s4SRPw6DWRE/image_thumb%5B1%5D.png?imgmax=800" width="436" height="75" /></a></p><br /><br /><p><b>So what did we learn?</b>: If you wish to keep changing the values for a variable, then use &quot;var&quot; and if you want immutable variables, use &quot;var&quot;.</p><br /><br /><p>Now that we know how to create both variables and val’bles, let us look at some fancy stuff that we could do with lists.</p><br /><br /><p><strong>Whats your range?</strong></p><br /><br /><p>Let us say, we need all odd numbers between 20 and 2000 which are divisible by both 5 and 7. If you were like me, we write the program to look like shown below.</p><br /><br /><pre class="scala" name="code">object RangeAction1<br />{<br />	def main(args: Array[String])<br />	{<br />		for(i &lt;- 20 to 2000)<br />		{<br />			if( i % 5 == 0 &amp;&amp; i % 7 == 0)<br />				println(i)<br />		}<br />	}<br />}</pre><br /><br /><p>Can we do any better? This looks too long now that I have been imagining things, increasing expectations about scala being so nice.</p><br /><br /><pre class="scala" name="code">object RangeAction1<br />{<br />	def main(args: Array[String])<br />	{<br />		(20 to 2000).filter(i=&gt;i%5==0&amp;&amp;i%7==0).foreach(i=&gt;println(i))<br />	}<br />}</pre><br /><br /><p>When we say “20 to 2000”, it returns a <a href="http://www.scala-lang.org/docu/files/api/scala/Range.html" target="_blank">Range</a> object. Look in the documentation to see what all magic could we do with range. Similarly if we were to work with lists, we could do something similar. Now to add 1 cent to the 3 cents we covered so far, what if i want the range to start with 20 and end with 2000 but increment by 10 and exclusive of 2000.</p><br /><br /><pre name="code" class="scala"><br />(20 until 2000 by 10).filter{i=> i % 5 == 0 & i % 7 == 0}.foreach{i=> println(i)}<br /></pre><br /><br /><p>Also, I wanted to be more like a regular programmer and put my closure inside {} instead of (). More fun later!</p>  