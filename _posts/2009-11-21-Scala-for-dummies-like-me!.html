---           
layout: post
title: Scala for dummies like me!
date: 2009-11-21 04:46:29 UTC
updated: 2009-11-21 04:46:29 UTC
comments: false
categories: 
---

Well! what should I be saying? I am that kind of person who keeps shifting from one interest to another. Once I am extremely interested in .NET (and I still am, but .NET is now an ocean – would take me too long to catch up with everything) and now I want to explore Scala – all new programming language on the JVM (new to me!) which has been receiving rave reviews. So, I went ahead and ordered Programming in Scala book on a1books.com (which by the way is a great site) but unfortunately I did not receive my copy yet. So here i am with all intention to do something with Scala but am out of resources (no offense but there are no simple tutorial on Scala which is interesting and which doesn’t make me fall asleep in 2 minutes).   <p>Lets first get started and write a Hello World program.</p>  <pre class="scala" name="code">class HelloWorld<br />{<br />	def main(args: Array[String]){<br />		println(&quot;Krishna Vangapandu - Hello Scala world!&quot;);<br />	}<br />}</pre><br /><br /><p></p><br /><br /><p>When you compile this and execute it, you would get a “java.lang.NoSuchMethodException: HelloWorld.main is not static”. Well, the mistake that I did was to put a “class” – but it should be object. So the hello world would be </p><br /><br /><pre class="scala" name="code">object HelloWorld<br />{<br />	def main(args: Array[String]){<br />		println(&quot;Krishna Vangapandu - Hello Scala world!&quot;);<br />	}<br />}</pre><br /><br /><p>So what's the difference between &quot;class&quot; and an &quot;object&quot;. Obviously there is no problem for the compiler, only the runtime blows! So what does the documentation say about this? Well even better lets use a decompiler to decompile the .class file we obtained and see how the scala code would when written in java. By the way, I am using <a href="http://java.decompiler.free.fr/?q=jdgui#downloads" target="_blank">this decompiler</a> - which i should say is freaking awesome.</p><br />&quot;class HelloWorld&quot; decompiled. <br /><br /><br /><br /><br /><pre class="java" name="code">import java.rmi.RemoteException;<br />import scala.Predef.;<br />import scala.ScalaObject;<br />import scala.ScalaObject.class;<br /><br />public class HelloWorld<br />  implements ScalaObject<br />{<br />  public void main(String[] args)<br />  {<br />    Predef..MODULE$.println(&quot;Krishna Vangapandu - Hello Scala world!&quot;);<br />  }<br /><br />  public int $tag()<br />    throws RemoteException<br />  {<br />    return ScalaObject.class.$tag(this);<br />  }<br />}</pre><br /><br /><p>&quot;object HelloWorld&quot; decompiled. <br />  <br /></p><br /><br /><pre class="java" name="code">import java.rmi.RemoteException;<br /><br />public final class HelloWorld<br />{<br />  public static final void main(String[] paramArrayOfString)<br />  {<br />    HelloWorld..MODULE$.main(paramArrayOfString);<br />  }<br /><br />  public static final int $tag()<br />    throws RemoteException<br />  {<br />    return HelloWorld..MODULE$.$tag();<br />  }<br />}</pre><br /><br /><p>But what the hell is a $tag() method? Well, I looked into the source code which had a comment on the $tag method which says </p><br /><br /><pre>This method is needed for optimizing pattern matching expressions which match on constructors of case classes.  </pre><br /><br /><p></p><br /><br /><p>Well, then what is the HelloWorld actually doing? Well, looks to me it was using the HelloWorld$ which was also generated by “scalac”. I cannot dig into what is&#160; going on here, may be sometime in the future. </p><br /><br /><p>So far, what I understood is that “object” creates a final class whereas “class” creates a ScalaObject and methods inside would all be instance methods. So anything declared “object” can act only as a static-only container.</p><br /><br /><p>Lets do a simple <a href="http://en.wikipedia.org/wiki/Bubble_sort#Step-by-step_example" target="_blank">bubble sort program</a> in Scala. What should we be knowing to write a button sort?</p><br /><br /><ol><br />  <li>Assuming we pass the numbers to sort from command line, how do we convert strings to numbers ? </li><br /><br />  <li>How do we loop the array? </li><br /></ol><br /><br /><pre class="scala" name="code">object BubbleSort<br />{<br />	def main(ip_args: Array[String]) //we shall get the input numbers to sort into &quot;args&quot;<br />	{<br />		/*<br />		we have a collection of strings, we should get a collection of numbers.<br />		so we use the map which says for each i in the ip_args, <br />		return the value after converting into expression. we  get a 1 to 1 returned array.		<br />		*/<br />		val args = ip_args.map { i =&gt; Integer.parseInt(i)}<br />		<br />		/*<br />		Looping : for index j which starts from 0 and ends at args.length-1 (inclusive)<br />		*/<br />		for(j &lt;- 0 to args.length-1)<br />		{<br />			for(i &lt;- 0 to args.length-2-j)<br />			{<br />				if(args(i) &gt; args (i+1))<br />				{<br />					//we do an ascending order sort.<br />					// Swap routine is shown belo.<br />					val temp = args(i) //this is how we define variables in scala<br />					args(i) = args(i+1)<br />					args(i+1) = temp	<br />				}<br />			}<br />		}<br />		//print all the numbers<br />		for(i &lt;- 0 to args.length-1)<br />			println(args(i))<br />	}<br />}</pre><br /><br /><p>I do agree that even without the comments the code does not look as concise as it should be. But right now, we are just getting started – we would slowly look at how we can write concise code when we think functional programming (I am saying this with my past experience with Groovy and C# Closures – by functional, 90% of the time I mean closures – which I know is not accurate).I have also observed that when you compile the BubbleSort.scala, you end up getting more than one .class files - which I believe is for the anonymous method (closure) we used.</p><br /><br /><p>That's it! for this post. See you soon with functional programming using Scala! </p>  